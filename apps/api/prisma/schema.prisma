generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Tenant {
  id        String   @id @default(uuid())
  name      String
  domain    String   @unique
  settings  String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  clients   Client[]
  vehicles  Vehicle[]
  rentals   Rental[]
  users     User[]
  @@map("tenants")
}

model User {
  id       String   @id @default(uuid())
  email    String   
  name     String
  roles    String
  tenantId String
  tenant   Tenant @relation(fields: [tenantId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@unique([email, tenantId])
  @@map("users")
}

model Client {
  id       String @id @default(uuid())
  name     String
  email    String
  phone    String
  document String
  address  String
  tenantId String
  tenant  Tenant   @relation(fields: [tenantId], references: [id])
  rentals Rental[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@unique([email, tenantId])
  @@map("clients")
}

model Vehicle {
  id        String @id @default(uuid())
  model     String
  brand     String
  year      Int
  plate     String
  color     String
  fuelType  String
  category  String
  dailyRate String
  status    String @default("available")
  tenantId  String
  tenant    Tenant   @relation(fields: [tenantId], references: [id])
  rentals   Rental[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@unique([plate, tenantId])
  @@map("vehicles")
}

model Rental {
  id        String   @id @default(uuid())
  clientId  String
  vehicleId String
  startDate DateTime
  endDate   DateTime
  status    String   @default("pending")
  amount    String
  tenantId  String
  tenant    Tenant  @relation(fields: [tenantId], references: [id])
  client    Client  @relation(fields: [clientId], references: [id])
  vehicle   Vehicle @relation(fields: [vehicleId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@map("rentals")
}